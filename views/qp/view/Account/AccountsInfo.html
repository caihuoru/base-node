<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width"/>
    <title>管理后台-用户信息</title>
    <link href="../../Content/Admin/css/bootstrap-cerulean.min.css" rel="stylesheet"/>
    <link href="../../Content/Admin/css/charisma-app.css" rel="stylesheet"/>
    <link rel="stylesheet" href="../../Content/layui-v2.5.4/layui/css/layui.css">
    <link href="../../Content/common.css" rel="stylesheet"/>
    <style>
        #UserType li {
            width: 18px;
            height: 18px;
            float: left;
            cursor: pointer;
            margin: 5px;
        }

        #UserType li.cur {
            border: 2px solid #999;
        }

        body {
            overflow-y: scroll !important;
        }

        .panel-body.box {
            padding: 0;
            margin: 15px;
            border: 2px solid #E6E6E6;
            border-top: 1px solid #E6E6E6;
            /*border-bottom: none;*/
        }

        .panel-body.box .row {
            border-bottom: 1px solid #E6E6E6;
            margin: 0;
            padding: 0;
        }

        .panel-body.box .row div {
            margin: 0;
            padding: 10px;
        }

        .panel-body.box .row .lb {
            border-left: 2px solid #E6E6E6;
        }

        .row label {
            font-weight: normal;
        }

        .layui-table-header {
            border-width: 0 0 0px;
        }

        .form-control {
            padding: 0 12px;
        }

        body .blue a {
            color: #1d9ce5;
        }

        .panel-heading {
            background: #00B4E5 !important;
        }
    </style>
</head>
<body>

<div id="content" class="main-content" style="display: none;" v-show="userID">
    <div class="">
        <div class="carousel box-inner">
            <div class="box-header well clearfix" data-original-title="">
                <h2><i class="glyphicon glyphicon-hand-right"></i>目前操作功能：管理后台-用户信息</h2>
            </div>
            <ul class="media nav nav-tabs">
                <li :class="{active:curTab==0}" @click="tabBarClick(0)">
                    <a href="javascript:void(0);" title="">基本信息</a>
                </li>
                <li :class="{active:curTab==1} " style="display: none;" @click="tabBarClick(1)">
                    <a href="javascript:void(0);" title="">详细信息</a>
                </li>
                <li :class="{active:curTab==2}" @click="tabBarClick(2)">
                    <a href="javascript:void(0);" title="">财富信息</a>
                </li>
                <li :class="{active:curTab==3}" @click="tabBarClick(3)">
                    <a href="javascript:void(0);" title="">记录信息</a>
                </li>
                <li>
                    <a :href="'RecordDrawInfoList.html?param='+userID+'&account='+ userInfo.Accounts" title="">游戏记录</a>
                </li>
                <li>
                    <!--                    <a :href="'ShareInfoList.html?param='+userID+'&account='+ userInfo.Accounts" title="">充值记录</a>-->
                    <a :href="'../chongZhiJiLu.html?param='+userID+'&account='+ userInfo.Accounts" title="">充值记录</a>
                </li>
                <li>
                    <a :href="'RecordGlodList.html?param='+userID+'&account='+ userInfo.Accounts" title="">金币流水</a>
                </li>
                <li>
                    <a :href="'RecordUserInoutList.html?param='+userID+'&account='+ userInfo.Accounts" title="">进出记录</a>
                </li>
                <li>
                    <a :href="'tuiGuang.html?param='+userID+'&account='+ userInfo.Accounts" title="">推广</a>
                </li>
                <li>
                    <a :href="'shuiShouJiLu.html?param='+userID+'&account='+ userInfo.Accounts" title="">税收记录</a>
                </li>
            </ul>
            <div class="tab-content" style="margin-top:-11px" v-show="curTab==0">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h3 class="panel-title">基本信息</h3>
                    </div>
                    <div class="panel-body box">
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">用户ID</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb"><label>{{userID}}</label></div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">ID号码</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb"><label>{{userInfo.GameID}}</label></div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">原帐号</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb"><label>{{userInfo.RegAccounts}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">身份证号码</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb"><label>{{userInfo.CardNum ||
                                '无'}}</label></div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">上级推广员</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb"><label>{{userInfo.Spreader ||
                                '无'}}</label></div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">帐号状态</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <span class="normal" v-if="userInfo.Nullity==0">正常</span>
                                <span class="wrong" v-else>停权</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">标记</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <ul id="UserType">
                                    <li v-for="(item,index) in color"
                                        :style="'background:#'+color[index]"
                                        :class="{cur: userInfo.UserType == ( index + 1)}"
                                        @click="userTypeChange(index)">
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">推广渠道号</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb"><label>{{userInfo.ChannelId}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">推广渠道昵称</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb"><label>{{userInfo.ChannelName}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">今日总输赢</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <label> {{userInfo.TodayAllWinLose}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">历史总输赢</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <label> {{userInfo.HistoryAllWinLose}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">今日充值次数</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <label>{{userInfo.TodayPayNum}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">今日充值金额</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <label>{{userInfo.TodayPayMoney}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">历史充值次数</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <label> {{userInfo.HistoryPayNum}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">历史充值金额</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <label>{{userInfo.HistoryPayMoney}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">今日提现次数</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <label>{{userInfo.TodayWithdrawNum}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">今日提现金额</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <label> {{userInfo.TodayWithdrawMoney}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">历史提现次数</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <label>{{userInfo.HistoryWithdrawNum}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">历史提现金额</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <label>{{userInfo.HistoryWithdrawMoney}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">携带金币</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <label>{{userInfo.Score}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">银行金币</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <label>{{userInfo.InsureScore}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">总金币</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <label>{{userInfo.AllScore}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">推广人数</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <label>{{userInfo.ChildPeople}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">累计返还</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <label> {{userInfo.ReturnMoney}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">注册IP地址</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <label>{{userInfo.RegisterIP}}&nbsp;&nbsp;&nbsp;&nbsp;{{userInfo.RegIPInfo}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">注册机器码</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <label> {{userInfo.RegisterMachine }}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">注册时间</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <label>{{userInfo.RegisterDate}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">最后登录IP</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <label> {{userInfo.LastLogonIP}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">最后登录机器码</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <label>{{userInfo.LastLogonMachine}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">最后登录时间</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <label>{{userInfo.LastLogonDate}}&nbsp;&nbsp;&nbsp;&nbsp;{{userInfo.LogonSpacingTime}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">用户账号</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <input id="txtAccount"
                                       class="form-control inline input-width-200"
                                       type="text"
                                       maxlength="31"
                                       name="txtAccount"
                                       v-model="userInfo.Accounts"
                                       v-validate="'required'">
                                <span class="wrong" v-if="errors.has('txtAccount')">请输入帐号,由字母、数字、下划线和汉字组成！</span>
                                <span v-else>帐号字符长度不可超过31个字符</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">用户昵称</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <input id="txtNickName"
                                       autocomplete="off"
                                       class="form-control inline input-width-200"
                                       type="text"
                                       maxlength="31"
                                       v-model="userInfo.NickName">
                                <span>用户昵称字符长度不可超过31个字符</span>
                            </div>
                        </div>


                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">登录密码</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <input id="txtLogonPass"
                                       autocomplete="off"
                                       class="form-control inline input-width-200"
                                       type="text"
                                       onfocus="this.type ='password'"
                                       maxlength="20">
                                <span>留空不修改</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">保险柜密码</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <input id="txtInsurePass"
                                       class="form-control  inline input-width-200"
                                       type="text"
                                       onfocus="this.type ='password'"
                                       maxlength="20">
                                <span>留空不修改</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">选项</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <label style="margin-right: 6px;">
                                    <input id="ckbNullity" type="checkbox"
                                           :checked="userInfo.Nullity == 1"
                                           name="xuanxiang"
                                           v-model="userInfo.Nullity">冻结帐号</label>
                                <label style="margin-right: 6px;">
                                    <input id="ckbStunDown" type="checkbox"
                                           :checked="userInfo.StunDown == 1"
                                           name="xuanxiang" v-model="userInfo.StunDown">安全关闭</label>
                                <label style="margin-right: 6px;">
                                    <input id="chkIsAndroid" type="checkbox"
                                           :checked="userInfo.IsAndroid == 1"
                                           name="xuanxiang" v-model="userInfo.IsAndroid">设为机器人</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">锁定机器</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <select id="rdoMoorMachine" v-model="userInfo.MoorMachine"
                                        class="form-control input-width-200">
                                    <option value=0>未锁定</option>
                                    <option value=1>客户端锁定</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">用户身份</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <select id="ddlMasterOrder" v-model="userInfo.MasterOrder">
                                    <option value="0">普通玩家</option>
                                    <option value="1" style="display: none;">管理员</option>
                                </select>
                            </div>
<!--                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">-->
<!--                                <select id="ddlMasterOrder" v-model="userInfo.MasterOrder">-->
<!--                                    <option value="0">普通玩家</option>-->
<!--                                    <option value="1" style="display: none;">管理员</option>-->
<!--                                </select>-->
<!--                            </div>-->
                        </div>
                        <div class="row" v-show="userInfo.MasterOrder == 0">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">玩家权限</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <p class="">
                                        <span class="">
                                            <input type="checkbox"
                                                   id="detailedInfoCheckboxAll"
                                                   value=""
                                                   onclick="SelectAll(this, 'ckbUserRight')"
                                            >
                                            <label for="detailedInfoCheckboxAll">全选</label>
                                        </span>
                                </p>
                                <p class="checkbox-radio">
                                    <span class="break-word" v-for="(value,key) in baseInfo.right.UserRightStatus">
                                        <input :id="'ckbUserRight'+key"
                                               type="checkbox"
                                               name="ckbUserRight"
                                               :value="key"
                                               v-model="UserRight"
                                               :checked="UserRight.indexOf(key)>-1">
                                        <label :for="'ckbUserRight'+key">{{value}}</label>
                                    </span>
                                </p>
                            </div>
                        </div>
                        <div class="row" v-show="userInfo.MasterOrder == 1">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">管理权限</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <p class="">
                                        <span class="">
                                            <input type="checkbox" id="adminAuthorityCheckboxAll" value=""
                                                   onclick="SelectAll(this, 'ckbMasterRight')"/>
                                            <label for="adminAuthorityCheckboxAll">全选</label>
                                        </span>
                                </p>
                                <p class="checkbox-radio">
                                    <span class="break-word" v-for="(value,key) in baseInfo.right.MasterRightStatus">
                                        <input :id="'ckbMasterRight'+key"
                                               type="checkbox"
                                               name="ckbMasterRight"
                                               :value="key"
                                               v-model="MasterRight"
                                               :checked="MasterRight.indexOf(key)>-1">
                                        <label :for="'ckbMasterRight'+key">{{value}}</label>
                                    </span>
                                </p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">个性签名</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <input id="txtUnderWrite"
                                       class="form-control  inline input-width-200"
                                       type="text"
                                       maxlength="63"
                                       v-model="userInfo.UnderWrite">
                                <span>个性签名字符长度不可超过63个字符</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">性别</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <select id="ddlGender" v-model="userInfo.Gender" class="form-control input-width-200">
                                    <option value=1>男</option>
                                    <option value=0>女</option>
                                </select>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">网站登录次数</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <label> {{userInfo.WebLogonTimes}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">大厅登录次数</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <label> {{userInfo.GameLogonTimes}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">在线时长共计</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <label> {{userInfo.OnLineTimeCount}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">游戏时长共计</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <label> {{userInfo.PlayTimeCount}}</label>
                            </div>
                        </div>
                        <ul class="list-group">
                            <li class="list-group-item no-bord">
                                <ul class="list-inline">
                                    <li>
                                        <button class="btn btn-outline-success search btn-md" @click="Add"><i
                                                class="glyphicon glyphicon-send"></i>保存
                                        </button>
                                    </li>
                                    <li>
                                        <button class="btn btn-danger search btn-md" @click="window.close();"><i
                                                class="glyphicon glyphicon-off"></i>关闭
                                        </button>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                    <div class="panel-heading">
                        <h3 class="panel-title">详细信息</h3>
                    </div>
                    <div class="panel-body box">
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">真实姓名</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <input id="txtCompellation"
                                       class="form-control inline input-width-200"
                                       type="text"
                                       v-model="userInfo.Compellation">
                                <span></span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">用户银行卡</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <input id="txtBankNO"
                                       maxlength="25"
                                       onkeyup="if(isNaN(value))execCommand('undo');"
                                       class="form-control inline input-width-200"
                                       type="text" v-model="userInfo.BankNO">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">银行名称</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <input id="txtBankName"
                                       maxlength="25"
                                       class="form-control inline input-width-200"
                                       type="text" v-model="userInfo.BankAddress">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">银行地址</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <input id="txtBankAddress"
                                       maxlength="120"
                                       class="form-control inline input-width-200"
                                       type="text" v-model="userInfo.BankName">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">QQ号码</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <input id="txtQQ"
                                       class="form-control inline input-width-200"
                                       type="text"
                                       maxlength="16"
                                       onkeyup="if(isNaN(value))execCommand('undo');"
                                       v-model="userInfo.QQ">
                                <span>QQ字符长度不可超过16个字符</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">电子邮箱</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <input id="txtEMail"
                                       name="txtEMail"
                                       class="form-control inline input-width-200"
                                       type="text"
                                       maxlength="32"
                                       v-model="userInfo.EMail"
                                       v-validate="'email'">
                                <span>电子邮箱字符长度不可超过32个字符</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">支付宝</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <input id="txtSeatPhone"
                                       class="form-control inline input-width-200"
                                       type="text" maxlength="32"
                                       v-model="userInfo.SeatPhone">
                                <span>支付宝字符长度不可超过32个字符</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">支付宝姓名</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <input id="txtZfbRealname"
                                       class="form-control inline input-width-200"
                                       type="text" maxlength="32"
                                       v-model="userInfo.ZfbRealname">
                                <span></span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">用户绑定手机号</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <input id="txtPhone"
                                       name="txtPhone"
                                       v-model="userInfo.RegisterMobile"
                                       autocomplete="off"
                                       class="form-control inline input-width-200"
                                       type="tel"
                                       maxlength="11"
                                       v-validate="'mobile'">
                                <span class="wrong" v-show="errors.has('txtPhone')">必须是11位手机号码</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">邮政编码</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <input id="txtPostalCode"
                                       class="form-control inline input-width-200"
                                       type="text" maxlength="8"
                                       onkeyup="if(isNaN(value))execCommand('undo');"
                                       v-model="userInfo.PostalCode">
                                <span>邮政编码字符长度不可超过8个字符</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">居住地址</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                               <textarea class="form-control"
                                         id="txtDwellingPlace" rows="2"
                                         placeholder="居住地址，长度不可超过128个字符"
                                         maxlength="128"
                                         v-model="userInfo.DwellingPlace"></textarea>
                                <!--                                <span>长度不可超过128个字符</span>-->
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">用户备注</div>
                            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6 lb">
                                <textarea class="form-control"
                                          id="txtUserNote" rows="2"
                                          placeholder="用户备注，长度不可超过256个字符"
                                          maxlength="256" v-model="userInfo.UserNote"></textarea>
                                <!--                                <span>长度不可超过256个字符</span>-->
                            </div>
                        </div>
                        <ul class="list-group">
                            <li class="list-group-item no-bord">
                                <ul class="list-inline">
                                    <li>
                                        <button class="btn btn-outline-success search btn-md" @click="Add1"><i
                                                class="glyphicon glyphicon-send"></i>保存
                                        </button>
                                    </li>
                                    <li>
                                        <button class="btn btn-danger search btn-md" @click="window.close();"><i
                                                class="glyphicon glyphicon-off"></i>关闭
                                        </button>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                    <div class="panel-heading" style="display: none;">
                        <h3 class="panel-title">登录信息</h3>
                    </div>
                    <div class="panel-body" style="display: none;">
                        <div class="row">
                            <div class="col-xs-2 col-md-1">网站登录次数：</div>
                            <div class="col-xs-2 col-md-1"><label
                                    id="ltWebLogonTimes">{{userInfo.WebLogonTimes}}</label></div>
                            <div class="col-xs-2 col-md-1">大厅登录次数：</div>
                            <div class="col-xs-2 col-md-1" style="text-align:left"><label id="ltGameLogonTimes">{{userInfo.GameLogonTimes}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-2 col-md-1">在线时长共计：</div>
                            <div class="col-xs-2 col-md-1"><label
                                    id="ltOnLineTimeCount">{{userInfo.OnLineTimeCount}}</label></div>
                            <div class="col-xs-2 col-md-1">游戏时长共计：</div>
                            <div class="col-xs-2 col-md-1" style="text-align:left"><label id="ltPlayTimeCount">{{userInfo.PlayTimeCount}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-2 col-md-1">最后登录时间：</div>
                            <div class="col-xs-4 col-md-2"><label
                                    id="ltLastLogonDate">{{userInfo.LastLogonDate}}</label></div>
                            <div class="col-xs-4 col-md-2" style="text-align:left"><label id="ltLogonSpacingTime">{{userInfo.LogonSpacingTime}}</label>前
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-2 col-md-1">最后登录地址：</div>
                            <div class="col-xs-4 col-md-2"><label id="ltLastLogonIP">{{userInfo.LastLogonIP}}</label>
                            </div>
                            <div class="col-xs-4 col-md-2" style="text-align:left"><label id="ltLogonIPInfo">{{userInfo.LogonIPInfo}}</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-2 col-md-1">登录机器：</div>
                            <div class="col-xs-3 col-md-1"><label
                                    id="ltLastLogonMachine">{{userInfo.LastLogonMachine}}</label></div>
                            <div class="col-xs-2 col-md-1"></div>
                            <div class="col-xs-2 col-md-1" style="text-align:left"></div>
                        </div>
                        <div class="row">
                            <div class="col-xs-2 col-md-1">注册机器：</div>
                            <div class="col-xs-3 col-md-1"><label
                                    id="ltRegisterMachine">{{userInfo.RegisterMachine}}</label></div>
                            <div class="col-xs-2 col-md-1"></div>
                            <div class="col-xs-2 col-md-1" style="text-align:left"></div>
                        </div>
                        <div class="row">
                            <div class="col-xs-2 col-md-1">注册来源：</div>
                            <div class="col-xs-2 col-md-1"><label
                                    id="ltRegisterOrigin">{{userInfo.RegisterOrigin}}</label></div>
                        </div>

                        <div class="row">
                            <div class="col-xs-2 col-md-1">注册时间：</div>
                            <div class="col-xs-4 col-md-2"><label id="ltRegisterDate">{{userInfo.RegisterDate}}</label>
                                <!--                                &nbsp;&nbsp;<label id="ltRegSpacingTime">{{userInfo.RegSpacingTime}}</label>-->
                            </div>

                        </div>
                        <div class="row">
                            <div class="col-xs-2 col-md-1">注册地址：</div>
                            <div class="col-xs-4 col-md-2"><label
                                    id="ltRegisterIP">{{userInfo.RegisterIP}}</label>&nbsp;&nbsp;<label
                                    id="ltRegIPInfo">{{userInfo.RegIPInfo}}</label></div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-content" style="margin-top:-11px;display: none;" v-show="curTab==1">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h3 class="panel-title">详细信息</h3>
                    </div>
                    <div class="panel-body">
                    </div>
                    <ul class="list-group">
                        <li class="list-group-item">
                            <ul class="list-inline">
                                <li>
                                    <button class="btn btn-outline-success search btn-md" @click="Add1"><i
                                            class="glyphicon glyphicon-send"></i>保存
                                    </button>
                                </li>
                                <li>
                                    <button class="btn btn-danger search btn-md" @click="window.close();"><i
                                            class="glyphicon glyphicon-off"></i>关闭
                                    </button>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="tab-content" style="margin-top:-11px;display: none;" v-show="curTab==2">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h3 class="panel-title">财富信息</h3>
                    </div>
                    <div class="panel-body maxW">
                        <div class="row">
                            <div class="col-xs-2 col-md-2" style="text-align:right">ID号码：</div>
                            <div class="col-xs-2 col-md-2"><label>{{userInfo.GameID}}</label></div>
                            <div class="col-xs-2 col-md-2" style="text-align:right">帐号：</div>
                            <div class="col-xs-2 col-md-2"><label>{{userInfo.Accounts}}</label></div>

                        </div>
                        <div class="row">
                            <div class="col-xs-2 col-md-2" style="text-align:right">携带金额：</div>
                            <div class="col-xs-2 col-md-2"><label>{{caifu.Score}}</label></div>
                            <div class="col-xs-2 col-md-2" style="text-align:right">保险柜金额：</div>
                            <div class="col-xs-2 col-md-2"><label>{{caifu.InsureScore}}</label></div>

                        </div>
                        <div class="row">
                            <div class="col-xs-2 col-md-2" style="text-align:right">赢局：</div>
                            <div class="col-xs-2 col-md-2"><label>{{caifu.WinCount}}</label></div>
                            <div class="col-xs-2 col-md-2" style="text-align:right">输局：</div>
                            <div class="col-xs-2 col-md-2"><label>{{caifu.LostCount}}</label></div>
                        </div>
                        <div class="row">
                            <div class="col-xs-2 col-md-2" style="text-align:right">和局：</div>
                            <div class="col-xs-2 col-md-2"><label>{{caifu.DrawCount}}</label></div>
                            <div class="col-xs-2 col-md-2" style="text-align:right">逃局：</div>
                            <div class="col-xs-2 col-md-2"><label>{{caifu.FleeCount}}</label></div>
                            <div class="col-xs-2 col-md-2">游戏税收：</div>
                            <div class="col-xs-2 col-md-2"><label>{{caifu.Revenue}}</label></div>
                        </div>

                    </div>
                    <div class="panel-heading">
                        <h3 class="panel-title">卡线信息</h3>
                    </div>
                    <div class="panel-body">
                        <table id="layTable" lay-filter="test"></table>
                        <!--                        <div class="row">-->
                        <!--                            <ul class="list-group">-->
                        <!--                                <li class="list-group-item" style="height:35px; background-color:ghostwhite;">-->
                        <!--                                    <ul class="list-inline">-->
                        <!--                                        <li class="col-xs-3 col-md-3">时间</li>-->
                        <!--                                        <li class="col-xs-3 col-md-3">游戏</li>-->
                        <!--                                        <li class="col-xs-3 col-md-3">房间</li>-->
                        <!--                                        <li class="col-xs-3 col-md-3">登录地址</li>-->
                        <!--                                    </ul>-->
                        <!--                                </li>-->
                        <!--                                <li class="list-group-item" style="height:35px;" v-for="item in kaxian">-->
                        <!--                                    <ul class="list-inline">-->
                        <!--                                        <li class="col-xs-3 col-md-1">{{item.CollectDate}}</li>-->
                        <!--                                        <li class="col-xs-3 col-md-1">{{item.GameKindName}}</li>-->
                        <!--                                        <li class="col-xs-3 col-md-1">{{item.GameRoomName}}</li>-->
                        <!--                                        <li class="col-xs-3 col-md-1">{{item.EnterMachine}}</li>-->
                        <!--                                    </ul>-->
                        <!--                                </li>-->
                        <!--                            </ul>-->
                        <!--                            <div v-show="kaxian.length == 0" style="text-align: center;">暂无卡线信息</div>-->
                        <!--                        </div>-->
                    </div>
                    <ul class="list-group">
                        <li class="list-group-item">
                            <ul class="list-inline">
                                <li><a class="btn btn-danger search btn-md" href="#" onclick="window.close();"><i
                                        class="glyphicon glyphicon-off"></i>关闭</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="tab-content" style="margin-top:-11px;display: none;" v-show="curTab==3">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h3 class="panel-title">记录信息</h3>
                    </div>
                    <div class="panel-body">
                        <div class="row" style="margin-top:5px;margin-bottom:5px;">
                            <div class="col-xs-2 col-md-2" style="text-align:right;width: 100px;">ID号码：</div>
                            <div class="col-xs-2 col-md-2"><label>{{userInfo.GameID}}</label></div>
                            <div class="col-xs-2 col-md-2" style="text-align:right;width: 100px;">帐号：</div>
                            <div class="col-xs-2 col-md-2"><label>{{userInfo.Accounts}}</label></div>
                        </div>
                    </div>
                    <div class="panel-heading">
                        <h3 class="panel-title">基本修改记录</h3>
                    </div>
                    <div class="panel-body">
                        <ul class="list-group">
                            <li class="list-group-item">
                                <ul class="list-inline blue">
                                    <li>
                                        <a href="javascript:void(0)" class="l"
                                           onclick="javascript:openWindowOwn('RecordAccountsExpendList.html?type=0&param='+param ,'raccounts 0 ',800,500);">历史修改帐号记录</a>
                                    </li>
                                    <li>
                                        <a href="javascript:void(0)" class="l"
                                           onclick="javascript: openWindowOwn('RecordAccountsExpendList.html?type=1&param='+param, 'RAccounts 0', 800, 500);">
                                            历史修改昵称记录
                                        </a>
                                    </li>
                                    <li>
                                        <a href="javascript:void(0)" class="l"
                                           onclick="javascript: openWindowOwn('RecordPasswdExpendList.html?param='+param, 'RPassword 0', 800, 500);">
                                            历史密码记录
                                        </a>
                                    </li>
                                    <li style="display: none">
                                        <a href="javascript:void(0)" class="l"
                                           onclick="javascript: openWindowOwn('RecordUserInoutList.html?param=0' , 'UserInout 0' , 1800, 800);">
                                            进出记录
                                        </a>
                                    </li>
                                </ul>

                            </li>
                        </ul>
                    </div>

                    <div class="panel-heading">
                        <h3 class="panel-title">财富信息记录</h3>
                    </div>
                    <div class="panel-body">
                        <ul class="list-group">
                            <li class="list-group-item">
                                <ul class="list-inline blue">
                                    <li style="display: none">
                                        <a href="javascript:void(0)" class="l"
                                           onclick="javascript: openWindowOwn('RecordDrawInfoList.html?param=0', 'RDrawInfo 0', 1200, 500);">
                                            游戏记录
                                        </a>
                                    </li>
                                    <li>
                                        <a href="javascript:void(0)" class="l"
                                           onclick="javascript: openWindowOwn('RecordInsureList.html?param='+param, 'RInsure 0', 1200, 500);">
                                            保险柜记录
                                        </a>
                                    </li>
                                    <li style="display: none">
                                        <a href="javascript:void(0)" class="l"
                                           onclick="javascript: openWindowOwn('../Filled/ShareInfoList.html?account=', 'ShareDetail 0', 1200, 500);">
                                            充值记录
                                        </a>
                                    </li>
                                    <li style="display: none">
                                        <a href="javascript:void(0)" class="l"
                                           onclick="javascript: openWindowOwn('RecordGlodList.html?param=0&Account=', 'RecordGlodList 0', 1200, 500);">
                                            金币变化记录
                                        </a>
                                    </li>
                                    <li>
                                        <a href="javascript:void(0)" class="l"
                                           onclick="javascript: openWindowOwn('../jinBiJiaoYiGuanLi.html?account='+account, 'RecordGlodList 0', 1200, 500);">
                                            提现记录
                                        </a>
                                    </li>
                                    <li>
                                        <a href="javascript:void(0)" class="l"
                                           onclick="javascript: openWindowOwn('../Abnormal/AccountGameScore.html?param='+param+'&account='+account, 'AccountGameScore 0', 1200, 600);">
                                            游戏总输赢
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                    <div class="panel-heading" style="display:none">
                        <h3 class="panel-title">积分信息记录</h3>
                    </div>
                    <div class="panel-body" style="display:none">
                        <ul class="list-group">
                            <li class="list-group-item">
                                <ul class="list-inline">
                                    <li>
                                        <a href="javascript:void(0)" class="l"
                                           onclick="javascript: openWindowOwn('/Account/RecordUserScoreInoutList?param=0', 'UserScoreInout 0', 1500, 500);">
                                            进出记录
                                        </a>
                                    </li>

                                </ul>

                            </li>
                        </ul>
                    </div>
                    <div class="panel-heading" style="display:none">
                        <h3 class="panel-title">系统赠送记录</h3>
                    </div>
                    <div class="panel-body" style="display:none">
                        <ul class="list-group">
                            <li class="list-group-item">
                                <ul class="list-inline">
                                    <li>
                                        <a href="javascript:void(0)" class="l"
                                           onclick="javascript: openWindowOwn('/Account/RecordGrantMemberList?param=0', 'RGrantMember 0', 800, 500);">
                                            赠送会员记录
                                        </a>
                                    </li>
                                    <li>
                                        <a href="javascript:void(0)" class="l"
                                           onclick="javascript: openWindowOwn('/Account/RecordGrantTreasureList?param=0', 'RGrantTreasure 0', 800, 500);">
                                            赠送游戏币记录
                                        </a>
                                    </li>
                                    <li>
                                        <a href="javascript:void(0)" class="l"
                                           onclick="javascript: openWindowOwn('/Account/RecordGrantExperienceList?param=0', 'RGrantExperience 0', 800, 500);">
                                            赠送经验记录
                                        </a>
                                    </li>
                                    <li>
                                        <a href="javascript:void(0)" class="l"
                                           onclick="javascript: openWindowOwn('/Account/RecordGrantScoreList?param=0', 'RGrantScore 0', 800, 500);">
                                            赠送积分记录
                                        </a>
                                    </li>
                                </ul>
                                <ul class="list-inline">
                                    <li>
                                        <a href="javascript:void(0)" class="l"
                                           onclick="javascript: openWindowOwn('/Account/RecordGrantGameIDList?param=0', 'RGrantGameID 0', 800, 500);">
                                            赠送靓号记录
                                        </a>
                                    </li>
                                    <li>
                                        <a href="javascript:void(0)" class="l"
                                           onclick="javascript: openWindowOwn('/Account/RecordGrantClearScoreList?param=0', 'RGrantClearScore 0', 800, 500);">
                                            清零积分记录
                                        </a>
                                    </li>
                                    <li>
                                        <a href="javascript:void(0)" class="l"
                                           onclick="javascript: openWindowOwn('/Account/RecordGrantClearFlee?param=0', 'RGrantClearFlee 0', 800, 500);">
                                            清零逃率记录
                                        </a>
                                    </li>
                                    <li></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                    <div class="panel-heading" style="display:none">
                        <h3 class="panel-title">魅力兑换记录</h3>
                    </div>
                    <div class="panel-body" style="display:none">
                        <ul class="list-group">
                            <li class="list-group-item">
                                <ul class="list-inline">
                                    <li>
                                        <a href="javascript:void(0)" class="l"
                                           onclick="javascript: openWindowOwn('/Account/RecordConvertPresentList?param=0', 'RConvertPresent 0', 1200, 500);">
                                            魅力兑换记录
                                        </a>
                                    </li>
                                    <li></li>
                                    <li></li>
                                    <li></li>
                                </ul>

                            </li>
                        </ul>
                    </div>
                    <ul class="list-group">
                        <li class="list-group-item">
                            <ul class="list-inline">
                                <li><a class="btn btn-danger search btn-md" href="#" onclick="window.close();"><i
                                        class="glyphicon glyphicon-off"></i>关闭</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="../../Scripts/jquery-1.10.2.min.js"></script>
<script src="../../Scripts/comm.js"></script>
<!--<script src="../../Scripts/lhgdialog/lhgdialog.min.js"></script>-->
<script src="../../Content/laydate/laydate.js"></script>
<script src="../../Scripts/vue.min.js"></script>
<script src="../../Content/veevalidate/zh_CN.js"></script>
<script src="../../Content/veevalidate/vee-validate.js"></script>
<script src="../../Content/veevalidate/config.js"></script>
<script src="../../Content/layui-v2.5.4/layui/layui.js"></script>
<script type="text/javascript">
    var param = getUrlParams('param')
    var curTab = getUrlParams('curTab')
    var account = '';
    layui.use('layer', function () {
        var layer = layui.layer
    })
    var myVue = new Vue({
        el: '#content',
        data: {
            curTab: curTab || 0,
            userID: param,
            baseInfo: {
                right: {},//权限信息
            },
            userInfo: {},//基本信息
            color: colors,
            UserRight: [],//用户权限
            MasterRight: [],//管理员权限
            login: {},//登录信息
            kaxian: [],//卡线信息
            caifu: {}
        },
        mounted: function () {
            var that = this;
            //获取用户信息
            $.ajax({
                type: 'GET',
                url: qp_url + 'admin/Account/AccountsInfo?token=' + getStorage('token') + '&UserID=' + param,
                dataType: 'json',
                success: function (res) {
                    console.log(res)
                    if (res.status == 1) {
                        that.userInfo = res.data
                        account = res.data.Accounts
                    } else {
                        layer.msg(res.msg)
                    }
                    let user = res.data.UserRight, master = res.data.MasterRight;
                    // let user = 85, master = 85;
                    //获取用户的权限信息
                    $.ajax({
                        type: 'GET',
                        url: qp_url + 'admin/Account/UserRight?token=' + getStorage('token'),
                        dataType: 'json',
                        success: function (resDate) {
                            if (resDate.status == 1) {
                                that.baseInfo.right = resDate.data
                                let masterAry = []//管理员权限
                                let userAry = []//用户权限
                                for (var key in resDate.data.MasterRightStatus) {
                                    masterAry.push(key);     //获取key值
                                }
                                for (var key in resDate.data.UserRightStatus) {
                                    userAry.push(key);     //获取key值
                                }
                                that.UserRight = getRights(user, userAry)
                                that.MasterRight = getRights(master, masterAry)
                                console.log(that.UserRight)
                                console.log(that.MasterRight)
                            }
                        }
                    })
                }
            })
            //财富信息
            $.ajax({
                type: 'GET',
                url: qp_url + 'admin/Account/AccountsTreasureInfo?token=' + getStorage('token') + '&UserID=' + param,
                dataType: 'json',
                success: function (res) {
                    console.log(res)
                    if (res.status == 1) {
                        that.caifu = res.data
                    }
                }
            })
            //财富--卡线信息
            $.ajax({
                type: 'GET',
                url: qp_url + 'admin/Account/kaxianList?token=' + getStorage('token') + '&UserID=' + param,
                dataType: 'json',
                success: function (res) {
                    console.log(res);
                    if (res.status == 1) {
                        that.kaxian = res.data
                    }
                    layui.use('table', function () {
                        var table = layui.table;
                        table.render({
                            elem: '#layTable'
                            , id: 'layTable'
                            , data: myVue.kaxian
                            , page: false
                            , cellMinWidth: 200
                            , cols: [[ //表头
                                {field: 'CollectDate', title: '时间'}
                                , {field: 'GameKindName', title: '游戏'}
                                , {field: 'GameRoomName', title: '房间'}
                                , {field: 'EnterMachine', title: '登录地址'}
                            ]]
                            , done: function (res, curr, count) {
                                $('th').css({'text-align': 'center'});
                                $('td').css({'text-align': 'center'});
                            }
                        });
                    });
                }
            })


        },
        methods: {
            //标记
            userTypeChange: function (inx) {
                $('#UserType li').removeClass('cur');
                // console.log(this.UserRight);
                if ((inx + 1) != this.userInfo.UserType) {//当前选中的和上一次选中的不一样
                    $('#UserType li').eq(inx).addClass('cur')
                    this.userInfo.UserType = inx + 1;
                    // console.log(this.UserRight);
                } else {
                    this.userInfo.UserType = 0;
                }
                console.log(inx);
                console.log(this.userInfo.UserType);
            },
            //tab切换
            tabBarClick: function (inx) {
                this.curTab = inx
            },
            //保存基本信息
            Add: function () {
                var that = this;
                let istrue = true;
                console.log('that.userInfo.Accounts', that.userInfo.Accounts)
                if (that.userInfo.Accounts != "" && that.userInfo.Accounts) {
                    console.log('if')
                    switch (isValidAccountCombination(that.userInfo.Accounts)) {
                        case 1:
                            layer.msg("帐号含有空格");
                            istrue = false;
                            break;
                        case 2:
                            layer.msg("帐号汉字位数不足");
                            istrue = false;
                            break;
                        case 3:

                            break;
                        case 4:
                            layer.msg("帐号位数不足");
                            istrue = false;
                            break;
                        default:
                            layer.msg("帐号格式有误");
                            istrue = false;
                            break;
                    }
                } else {
                    console.log('else')
                    istrue = false;
                    layer.msg("请输入帐号,由字母、数字、下划线和汉字组成！");
                    // $("#lblacount").html("请输入帐号,由字母、数字、下划线和汉字组成！");
                }
                if (istrue) {
                    if (that.userInfo.NickName == "") {
                        that.userInfo.NickName = that.userInfo.Accounts
                    } else {
                        switch (isValidAccountCombination(that.userInfo.NickName)) {
                            case 1:
                                layer.msg("用户昵称含有空格");
                                istrue = false;
                                break;
                            case 2:
                                layer.msg("用户昵称汉字位数不足");
                                istrue = false;
                                break;
                            case 3:

                                break;
                            case 4:
                                layer.msg("用户昵称位数不足");
                                istrue = false;
                                break;
                            default:
                                layer.msg("用户昵称格式有误");
                                istrue = false;
                                break;
                        }
                    }
                }
                if(!istrue){
                    return;
                }
                //玩家权限 = 选中的value值相加
                var UserRight = 0, MasterRight = 0;
                //管理权限 = 选中的value值相加
                $("input[name='ckbUserRight']:checked").each(function (i, item) {
                    UserRight += parseInt($(item).val());
                });
                $("input[name='ckbMasterRight']:checked").each(function (i, item) {
                    MasterRight += parseInt($(item).val());
                });
                console.log('UserRight', UserRight)
                console.log('MasterRight', MasterRight)
                //选项
                that.userInfo.Nullity = $("#ckbNullity").is(':checked') ? 1 : 0;
                that.userInfo.StunDown = $("#ckbStunDown").is(':checked') ? 1 : 0;
                that.userInfo.IsAndroid = $("#chkIsAndroid").is(':checked') ? 1 : 0;
                if (that.userInfo.MasterOrder == 0) {
                    MasterRight = 0
                } else {
                    UserRight = 0
                }

                var postData = {
                    token: getStorage('token'),
                    UserID: that.userID,
                    Accounts: that.userInfo.Accounts,
                    NickName: that.userInfo.NickName,
                    LogonPass: $('#txtLogonPass').val(),
                    InsurePass: $('#txtInsurePass').val(),
                    UnderWrite: that.userInfo.UnderWrite,
                    Gender: that.userInfo.Gender,
                    // FaceID: "",
                    // FaceType: "",
                    Nullity: that.userInfo.Nullity,
                    StunDown: that.userInfo.StunDown,
                    IsAndroid: that.userInfo.IsAndroid,
                    MoorMachine: that.userInfo.MoorMachine,
                    // Experience: that.userInfo.Experience,//经验值
                    // Present: that.userInfo.Present,//已兑魅力值
                    // LoveLiness: that.userInfo.LoveLiness,//魅力值
                    // MemberOrder: that.userInfo.RegisterMobile,//不知是何字段
                    Compellation: that.userInfo.Compellation,
                    UserRight: UserRight,
                    MasterRight: MasterRight,
                    MasterOrder: that.userInfo.MasterOrder,
                    UserType: that.userInfo.UserType,
                    MobilePhone: that.userInfo.RegisterMobile,
                    RegisterMobile: that.userInfo.RegisterMobile,
                    SeatPhone: that.userInfo.SeatPhone,
                    BankNO: that.userInfo.BankNO,
                    BankName: that.userInfo.BankName,
                    QQ: that.userInfo.QQ,
                    EMail: that.userInfo.EMail,
                    PostalCode: that.userInfo.PostalCode,
                    DwellingPlace: that.userInfo.DwellingPlace,
                    UserNote: that.userInfo.UserNote,
                    UnderWrite: that.userInfo.UnderWrite,
                }
                console.log(postData);
                $.ajax({
                    type: 'POST',
                    url: qp_url + 'admin/Account/UpdateNewAccount',
                    dataType: 'json',
                    data: postData,
                    success: function (res) {
                        console.log(res)
                        layer.msg(res.msg)
                        if (res.status == 1) {
                            window.opener.reloadTable()
                        }
                    }
                })
            },
            //保存详细信息
            Add1: function () {
                console.log("Add1");
                var that = this;
                var istrue = true;
                if (istrue && (that.userInfo.QQ && that.userInfo.QQ != "" && isNaN(that.userInfo.QQ))) {
                    layer.msg("QQ应为数字");
                    istrue = false;
                    return false;
                }
                if (istrue && (that.userInfo.EMail && that.userInfo.EMail != "" && !isEmail(that.userInfo.EMail))) {
                    istrue = false;
                    layer.msg("EMail格式不正确");
                    return false;
                }
                if (istrue && (that.userInfo.MobilePhone && that.userInfo.MobilePhone != "" && !isPhone(that.userInfo.MobilePhone))) {
                    istrue = false;
                    layer.msg("手机号格式不正确");
                    return false;
                }
                var postData = {
                    token: getStorage('token'),
                    UserID: that.userID,
                    Accounts: that.userInfo.Accounts,
                    QQ: that.userInfo.QQ,
                    EMail: that.userInfo.EMail,
                    SeatPhone: that.userInfo.SeatPhone,
                    MobilePhone: that.userInfo.MobilePhone,
                    DwellingPlace: that.userInfo.DwellingPlace,
                    UserNote: that.userInfo.UserNote,
                    Compellation: that.userInfo.Compellation,
                    BankNO: that.userInfo.BankNO,
                    BankName: that.userInfo.BankName,
                    BankAddress: that.userInfo.BankAddress,
                    PostalCode: that.userInfo.PostalCode,
                    ZfbRealname:that.userInfo.ZfbRealname
                }
                console.log(postData);
                this.$validator.validate().then(valid => {
                    console.log(valid)
                    if (valid) {
                        $.ajax({
                            type: 'POST',
                            url: qp_url + 'admin/Account/UpdateIndividualDatum',
                            dataType: 'json',
                            data: postData,
                            success: function (res) {
                                layer.msg(res.msg)
                            }
                        })
                    }
                })
            }
        }
    })

    function userMark() {
        var userTypeHtml = "";
        for (var x in colors) {
            userTypeHtml += "<li style='background:#" + colors[x] + "'></li>"
        }
        userTypeHtml += "<li style='clear: both;'></li>"
        userTypeHtml = `<ul id="UserType">${userTypeHtml}</ul>`
        return userTypeHtml
        // $('#UserType').append(userTypeHtml);
        // $('#UserType li').click(function () {
        //     var index = $(this).index();
        //     if (userType == (index + 1))//取消色块
        //     {
        //         userType = 0;
        //         $(this).removeClass("cur");
        //     }
        //     else {
        //         userType = index + 1;
        //         $(this).addClass("cur").siblings().removeClass("cur")
        //     }
        //
        // })
    }

    function getRights(num, ary) {
        if (num == 0) {
            return []
        }
        var temp = [];
        for (var i = ary.length - 1; i >= 0; i--) {
            if (num - ary[i] < 0) {
                continue;
            } else {
                num -= ary[i]
                temp.push(ary[i])
            }
        }
        return temp
    }

    // var index = parseInt('0');
    //
    // var userType = 0;

    // $(document).ready(function () {
    //     loadUserType();
    //
    //     var type = '0';
    //     if (type > 0) {
    //         $('#UserType li').eq(type - 1).addClass("cur");
    //         userType = type;
    //     }
    //     // //弹出页面
    //     // $('#btnSwitchFace').dialog({
    //     //     id: 'winUserfaceList',
    //     //     title: '更换头像',
    //     //     width: 540,
    //     //     height: 385,
    //     //     content: 'url:/Account/UserFaceList',
    //     //     min: false,
    //     //     max: false,
    //     //     fixed: true,
    //     //     drag: false,
    //     //     resize: false
    //     // });
    // });
    function loadUserType() {
        // var userTypeHtml = "";
        // for (x in colors) {
        //     userTypeHtml += "<li style='background:#" + colors[x] + "'></li>"
        // }
        // $('#UserType').append(userTypeHtml);
        // $('#UserType li').click(function () {
        //     var index = $(this).index();
        //     if (userType == (index + 1))//取消色块
        //     {
        //         userType = 0;
        //         $(this).removeClass("cur");
        //     }
        //     else {
        //         userType = index + 1;
        //         $(this).addClass("cur").siblings().removeClass("cur")
        //     }
        //
        // })
    }

    // function Add() {
    //     var istrue = true;
    //     var Accounts = $("#txtAccount").val();
    //     if (Accounts != "") {
    //         switch (isValidAccountCombination(Accounts)) {
    //             case 1:
    //                 alert("帐号含有空格");
    //                 istrue = false;
    //                 break;
    //             case 2:
    //                 alert("帐号汉字位数不足");
    //                 istrue = false;
    //                 break;
    //             case 3:
    //
    //                 break;
    //             case 4:
    //                 alert("帐号位数不足");
    //                 istrue = false;
    //                 break;
    //             default:
    //                 alert("帐号格式有误");
    //                 istrue = false;
    //                 break;
    //         }
    //     } else {
    //         istrue = false;
    //         $("#lblacount").html("请输入帐号,由字母、数字、下划线和汉字组成！");
    //     }
    //     var NickName = $("#txtNickName").val();
    //     if (istrue) {
    //         if (NickName == "") {
    //             NickName = Accounts;
    //         } else {
    //             switch (isValidAccountCombination(NickName)) {
    //                 case 1:
    //                     alert("用户昵称含有空格");
    //                     istrue = false;
    //                     break;
    //                 case 2:
    //                     alert("用户昵称汉字位数不足");
    //                     istrue = false;
    //                     break;
    //                 case 3:
    //
    //                     break;
    //                 case 4:
    //                     alert("用户昵称位数不足");
    //                     istrue = false;
    //                     break;
    //                 default:
    //                     alert("用户昵称格式有误");
    //                     istrue = false;
    //                     break;
    //             }
    //         }
    //     }
    //     var LogonPass = $("#txtLogonPass").val();
    //     //if (istrue && LogonPass == "") {
    //     //    alert("登录密码不能为空！");
    //     //    istrue = false;
    //     //}
    //
    //     var InsurePass = $("#txtInsurePass").val();
    //     //if (istrue && InsurePass == "") {
    //     //    InsurePass = LogonPass;
    //     //}
    //
    //     var UnderWrite = $("#txtUnderWrite").val();
    //     //if (istrue && UnderWrite == "") {
    //     //    alert("个性签名不能为空!");
    //     //    istrue = false;
    //     //}
    //     var Gender = $("#ddlGender").val();
    //     var FaceID = $("#inFaceID").val();
    //     var Nullity = $("#ckbNullity").is(':checked') ? 1 : 0;
    //     var StunDown = $("#ckbStunDown").is(':checked') ? 1 : 0;
    //     var IsAndroid = $("#chkIsAndroid").is(':checked') ? 1 : 0;
    //     var MoorMachine = $("input[name='rdoMoorMachine']:checked").val();
    //     var Experience = $("#txtExperience").val();
    //     if (Experience == "" || isNaN(Experience)) {
    //         istrue = false;
    //         alert("经验值不能为空!");
    //     }
    //     var Present = $("#txtPresent").val();
    //     if (Present == "" || isNaN(Present)) {
    //         //istrue = false;
    //         //alert("礼物不能为空!");
    //         Present = 0;
    //     }
    //     var LoveLiness = $("#txtLoveLiness").val();
    //     if (LoveLiness == "" || isNaN(LoveLiness)) {
    //         istrue = false;
    //         alert("净年值不能为空!");
    //     }
    //     var MemberOrder = $("#ddlMemberOrder").val();
    //     var Compellation = $("#txtCompellation").val();
    //     //if (Compellation == "") {
    //     //    istrue = false;
    //     //    alert("真实姓名不能为空!");
    //     //}
    //     //var QQ = $("#txtQQ").val();
    //     //if (QQ == "" || isNaN(QQ)) {
    //     //    istrue = false;
    //     //    alert("QQ不能为空!");
    //     //}
    //     //var EMail = $("#txtEMail").val();
    //     //if (EMail == "") {
    //     //    istrue = false;
    //     //    alert("EMail不能为空!");
    //     //} else {
    //     //    if (!isEmail(EMail)) {
    //     //        istrue = false;
    //     //        alert("EMail格式不正确!");
    //     //    }
    //     //}
    //     //var SeatPhone = $("#txtSeatPhone").val();
    //     //if (SeatPhone == "") {
    //     //    istrue = false;
    //     //    alert("固定电话不能为空!");
    //     //} else {
    //     //    if (!isPhone(SeatPhone)) {
    //     //        istrue = false;
    //     //        alert("固定电话格式不正确!");
    //     //    }
    //     //}
    //     //var MobilePhone = $("#txtMobilePhone").val();
    //     //if (MobilePhone == "") {
    //     //    istrue = false;
    //     //    alert("手机不能为空!");
    //     //} else {
    //     //    if (!isPhone(MobilePhone)) {
    //     //        istrue = false;
    //     //        alert("手机格式不正确!");
    //     //    }
    //     //}
    //     //var PostalCode = $("#txtPostalCode").val();
    //     //if (PostalCode == "") {
    //     //    istrue = false;
    //     //    alert("邮政编码不能为空!");
    //     //} else {
    //     //    if (!isPhone(MobilePhone)) {
    //     //        istrue = false;
    //     //        alert("邮政编码不正确!");
    //     //    }
    //     //}
    //     //var DwellingPlace = $("#txtDwellingPlace").val();
    //     //var UserNote = $("#txtUserNote").val();
    //     var UserRight = 0, MasterRight = 0;
    //     $("input[name='ckbUserRight']:checked").each(function (i, item) {
    //         UserRight += parseInt($(item).val());
    //     });
    //     //if (UserRight == 0) {
    //     //    istrue = false;
    //     //    alert("请选择用户权限!");
    //     //}
    //     $("input[name='ckbMasterRight']:checked").each(function (i, item) {
    //         MasterRight += parseInt($(item).val());
    //     });
    //     //if (MasterRight == 0) {
    //     //    istrue = false;
    //     //    alert("请选择管理权限!");
    //     //}
    //
    //     var phone = $('#txtPhone').val();
    //     //if (phone != "" && !(/^1[3|4|5|8][0-9]\d{4,8}$/.test(phone)))
    //     //{
    //     //    alert("手机号格式错误!");
    //     //    return false;
    //     //}
    //
    //     var MasterOrder = $("#ddlMasterOrder").val();
    //     if (istrue) {
    //         var data = {
    //             UserID: parseInt('{1}'),
    //             Accounts: Accounts,
    //             NickName: NickName,
    //             LogonPass: LogonPass,
    //             InsurePass: InsurePass,
    //             UnderWrite: UnderWrite,
    //             Gender: Gender,
    //             FaceID: FaceID,
    //             FaceType: $("#faceType").val(),
    //             Nullity: Nullity,
    //             StunDown: StunDown,
    //             IsAndroid: IsAndroid,
    //             MoorMachine: MoorMachine,
    //             Experience: Experience,
    //             Present: Present,
    //             LoveLiness: LoveLiness,
    //             MemberOrder: MemberOrder,
    //             Compellation: Compellation,
    //             UserRight: UserRight,
    //             MasterRight: MasterRight,
    //             MasterOrder: MasterOrder,
    //             UserType: userType,
    //             MobilePhone: phone
    //         };
    //         AjaxSubmit("/Account/UpdateNewAccount", data, callBack, "add");
    //     }
    // };

    //回调函数
    // function callBack(jsonData, fname) {
    //     if (fname == "add") {
    //         alert(jsonData.Msg);
    //         window.close();
    //         //window.opener.location.reload();
    //     }
    // };
</script>
</body>
</html>
